"use strict";(self.webpackChunkakart=self.webpackChunkakart||[]).push([[361],{6442:(e,n,o)=>{o.d(n,{A:()=>u});var t=o(7154);const r=500;var a=o(1036);const s="get",i="post",c="put",l="delete";const u=class{constructor(){this.isLoggedIn=!1,this.userData={},this.userToken=null,this.baseURL="http://206.189.133.111:3000/"}get(e,n){return new Promise(((o,t)=>{this.api(s,e,n).then((e=>{o(e)})).catch((e=>{console.log(e)}))}))}post(e,n){return new Promise(((o,t)=>{this.api(i,e,n).then((e=>{o(e)})).catch((e=>{}))}))}put(e,n){return new Promise(((o,t)=>{this.api(c,e,n).then((e=>{o(e)})).catch((e=>{}))}))}delete(e,n){return new Promise(((o,t)=>{this.api(l,e,n).then((e=>{o(e)})).catch((e=>{console.log(e)}))}))}api(e,n,o){return new Promise(((s,i)=>{let c={};c.method=e,c.url=this.baseURL+n,c.headers=this.setHeaders(o),o&&o&&(c.data=o),(0,t.A)(c).then((e=>{var n;e&&e.status===r?a.oR.error("Something went wrong!!"):(s(e),e&&a.oR.success(null===(n=e.data)||void 0===n?void 0:n.messages))})).catch((e=>{var n,o;let t=null===e||void 0===e?void 0:e.response,r=null===e||void 0===e?void 0:e.response.data;console.log("ERROR",e),null!==(n=e.response.data)&&void 0!==n&&n.email&&e.response.data.email.length>0?a.oR.error("Email ".concat(e.response.data.email[0])):null!==(o=e.response.data)&&void 0!==o&&o.phone_number&&e.response.data.phone_number.length>0?a.oR.error("Mobile Number ".concat(e.response.data.phone_number[0])):e.response.data.message&&e.response.data.message.length>0?a.oR.error("".concat(e.response.data.message)):401===(null===t||void 0===t?void 0:t.status)?a.oR.error("".concat(r.errors)):422===(null===t||void 0===t?void 0:t.status)?a.oR.error("".concat(e.response.data.errors)):a.oR.error("An error occurred")}))}))}setHeaders(e){let n={"accept-language":"en","Content-Type":"application/json",Accept:"application/json"};if(n.Authorization=localStorage.getItem("token"),e&&(e.isMultipart&&(n["Content-Type"]="multipart/form-data"),e.headers))for(var o in e.headers)e.headers.hasOwnProperty(o)&&(n[o]=e.headers[o]);return n}}},2361:(e,n,o)=>{o.r(n),o.d(n,{default:()=>f});var t=o(5043),r=o(2518),a=o(8446),s=o(8903),i=o(6446),c=o(5865),l=o(9252),u=o(5795),d=o(3336),p=o(3216),h=o(9456),m=o(6870);const v=new(o(6442).A),x=(e,n)=>(console.log("userin otpverify",e),function(o){var t;o((t=e,{type:m.Sf,payload:t})),(async e=>new Promise((async(n,o)=>{try{const o=await v.post("".concat("/accounts/verify_otp"),e);console.log("result in api",o),n(o)}catch(t){o(t)}})))(e).then((e=>{var t;let r={id:null===(t=e.data)||void 0===t?void 0:t.account.id};console.log("res",e),o({type:m.fj}),200===e.status&&n("/createnewpwd",{state:r})})).catch((e=>o((e=>({type:m.kD,payload:e}))(e.message))))});var g=o(6929),y=o(579);const f=()=>{const e=(0,p.zy)(),n=(0,p.Zp)(),o=(0,h.wA)(),[m,v]=(0,t.useState)(""),[f,A]=(0,t.useState)(60),[b,w]=(0,t.useState)(!0),[C,S]=(0,t.useState)(["","","",""]),R=(0,t.useRef)([]),j=null===e||void 0===e?void 0:e.state;(0,t.useEffect)((()=>{let e;return f>0?e=setInterval((()=>{A((e=>e-1))}),1e3):(w(!1),clearInterval(e)),()=>clearInterval(e)}),[f]);const k="".concat(String(Math.floor(f/60)).padStart(2,"0"),":").concat(String(f%60).padStart(2,"0"));return(0,y.jsx)(l.A,{component:"main",maxWidth:"xs",sx:{margin:"auto"},children:(0,y.jsx)(i.A,{children:(0,y.jsxs)(d.A,{elevation:1,variant:"elevation",square:!1,sx:{marginTop:8,padding:"10px",display:"flex",flexDirection:"column",alignItems:"center",bgcolor:"#fff"},children:[(0,y.jsxs)(c.A,{mt:2,children:["Please Enter OTP Sent To"," ",(0,y.jsx)(a.A,{sx:{textDecoration:"none",cursor:"pointer"},children:null!==j&&void 0!==j&&j.email?null===j||void 0===j?void 0:j.email:null===j||void 0===j?void 0:j.phone_number})," "]}),(0,y.jsx)(a.A,{sx:{textDecoration:"none",fontSize:"15px",cursor:"pointer"},children:"Change ?"}),(0,y.jsxs)(i.A,{sx:{padding:"15px"},children:[(0,y.jsx)(s.Ay,{container:!0,spacing:1,sx:{display:"flex",flexDirection:"row",flexWrap:"nowrap",justifyContent:"center"},children:C.map(((e,n)=>(0,y.jsx)(s.Ay,{item:!0,children:(0,y.jsx)(u.A,{variant:"standard",autoComplete:"off",size:"small",value:e,onChange:e=>((e,n)=>{if(n.length>1)return;const o=[...C];o[e]=n,S(o),1===n.length&&e<C.length-1&&R.current[e+1].focus()})(n,e.target.value),inputProps:{maxLength:1,style:{textAlign:"center",maxWidth:"4rem"}},onKeyDown:e=>{"Backspace"===e.key&&(e=>{if(""!==C[e]){const n=[...C];n[e]="",S(n)}else e>0&&R.current[e-1].focus()})(n)},inputRef:e=>{R.current[n]=e}})},n)))}),(0,y.jsx)(r.A,{onClick:()=>(()=>{const e=C.join("");null!==j&&void 0!==j&&j.email?o(x({otp:e,email:j.email,account_id:j.id},n)):null!==j&&void 0!==j&&j.phone_number?o(x({otp:e,phone_number:j.phone_number.toString(),account_id:j.id},n)):alert("An error occurred"),S(["","","",""])})(),fullWidth:!0,variant:"contained",sx:{mt:3,mb:2,color:"#111",bgcolor:"#FFD814",borderColor:"#FCD200",borderRadius:"md",textDecoration:"none",textTransform:"none",borderRadius:"8px","&:hover":{bgcolor:"#FCD200"}},children:"Verify"}),(0,y.jsxs)(s.Ay,{container:!0,sx:{marginBottom:"8px"},children:[(0,y.jsx)(s.Ay,{item:!0,xs:!0,children:(0,y.jsxs)(c.A,{sx:{fontSize:"14px"},children:["not recieved your code ? ",k]})}),(0,y.jsx)(s.Ay,{item:!0,children:(0,y.jsx)(r.A,{color:"success",disabled:b,onClick:()=>{null!==j&&void 0!==j&&j.email?o((0,g.ie)({email:j.email,account_id:j.id},n)):null!==j&&void 0!==j&&j.phone_number?o((0,g.ie)({phone_number:j.phone_number.toString(),account_id:j.id},n)):alert("An error occurred"),A(60),w(!0)},variant:"contained",sx:{width:"15px",height:"25px",color:"#FFFCFC",bgcolor:"#2C7E34",borderColor:"#2C7E34",borderRadius:"md",textDecoration:"none",textTransform:"none",borderRadius:"8px",fontSize:"12px",marginTop:"-10px","&:hover":{bgcolor:"#2C7E34"}},children:"Resend"})})]})]})]})})})}},6929:(e,n,o)=>{o.d(n,{ie:()=>a});var t=o(6870);const r=new(o(6442).A),a=(e,n)=>function(n){var o;n((o=e,{type:t.Mj,payload:o})),(async e=>new Promise((async(n,o)=>{try{const o=await r.post("".concat("accounts/resend_otp"),e);console.log("result in api",o),n(o)}catch(t){o(t)}})))(e).then((e=>{console.log(e),n({type:t.hV})})).catch((e=>n((e=>({type:t.yZ,payload:e}))(e.message))))}},8446:(e,n,o)=>{o.d(n,{A:()=>R});var t=o(8587),r=o(8168),a=o(5043),s=o(8387),i=o(8606),c=o(6803),l=o(4535),u=o(2876),d=o(7844),p=o(5849),h=o(5865),m=o(7056),v=o(2400);function x(e){return(0,v.Ay)("MuiLink",e)}const g=(0,m.A)("MuiLink",["root","underlineNone","underlineHover","underlineAlways","button","focusVisible"]);var y=o(7162),f=o(310);const A={primary:"primary.main",textPrimary:"text.primary",secondary:"secondary.main",textSecondary:"text.secondary",error:"error.main"},b=e=>{let{theme:n,ownerState:o}=e;const t=(e=>A[e]||e)(o.color),r=(0,y.Yn)(n,"palette.".concat(t),!1)||o.color,a=(0,y.Yn)(n,"palette.".concat(t,"Channel"));return"vars"in n&&a?"rgba(".concat(a," / 0.4)"):(0,f.X4)(r,.4)};var w=o(579);const C=["className","color","component","onBlur","onFocus","TypographyClasses","underline","variant","sx"],S=(0,l.Ay)(h.A,{name:"MuiLink",slot:"Root",overridesResolver:(e,n)=>{const{ownerState:o}=e;return[n.root,n["underline".concat((0,c.A)(o.underline))],"button"===o.component&&n.button]}})((e=>{let{theme:n,ownerState:o}=e;return(0,r.A)({},"none"===o.underline&&{textDecoration:"none"},"hover"===o.underline&&{textDecoration:"none","&:hover":{textDecoration:"underline"}},"always"===o.underline&&(0,r.A)({textDecoration:"underline"},"inherit"!==o.color&&{textDecorationColor:b({theme:n,ownerState:o})},{"&:hover":{textDecorationColor:"inherit"}}),"button"===o.component&&{position:"relative",WebkitTapHighlightColor:"transparent",backgroundColor:"transparent",outline:0,border:0,margin:0,borderRadius:0,padding:0,cursor:"pointer",userSelect:"none",verticalAlign:"middle",MozAppearance:"none",WebkitAppearance:"none","&::-moz-focus-inner":{borderStyle:"none"},["&.".concat(g.focusVisible)]:{outline:"auto"}})})),R=a.forwardRef((function(e,n){const o=(0,u.A)({props:e,name:"MuiLink"}),{className:l,color:h="primary",component:m="a",onBlur:v,onFocus:g,TypographyClasses:y,underline:f="always",variant:b="inherit",sx:R}=o,j=(0,t.A)(o,C),{isFocusVisibleRef:k,onBlur:D,onFocus:_,ref:F}=(0,d.A)(),[P,T]=a.useState(!1),M=(0,p.A)(n,F),z=(0,r.A)({},o,{color:h,component:m,focusVisible:P,underline:f,variant:b}),L=(e=>{const{classes:n,component:o,focusVisible:t,underline:r}=e,a={root:["root","underline".concat((0,c.A)(r)),"button"===o&&"button",t&&"focusVisible"]};return(0,i.A)(a,x,n)})(z);return(0,w.jsx)(S,(0,r.A)({color:h,className:(0,s.A)(L.root,l),classes:y,component:m,onBlur:e=>{D(e),!1===k.current&&T(!1),v&&v(e)},onFocus:e=>{_(e),!0===k.current&&T(!0),g&&g(e)},ref:M,ownerState:z,variant:b,sx:[...Object.keys(A).includes(h)?[]:[{color:h}],...Array.isArray(R)?R:[R]]},j))}))}}]);
//# sourceMappingURL=361.f6807f3b.chunk.js.map