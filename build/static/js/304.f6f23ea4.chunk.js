"use strict";(self.webpackChunkakart=self.webpackChunkakart||[]).push([[304],{6442:(e,o,n)=>{n.d(o,{A:()=>u});var t=n(7154);const r=500;var a=n(1036);const s="get",i="post",c="put",l="delete";const u=class{constructor(){this.isLoggedIn=!1,this.userData={},this.userToken=null,this.baseURL="http://64.227.181.53:3000/"}get(e,o){return new Promise(((n,t)=>{this.api(s,e,o).then((e=>{n(e)})).catch((e=>{console.log(e)}))}))}post(e,o){return new Promise(((n,t)=>{this.api(i,e,o).then((e=>{n(e)})).catch((e=>{}))}))}put(e,o){return new Promise(((n,t)=>{this.api(c,e,o).then((e=>{n(e)})).catch((e=>{}))}))}delete(e,o){return new Promise(((n,t)=>{this.api(l,e,o).then((e=>{n(e)})).catch((e=>{console.log(e)}))}))}api(e,o,n){return new Promise(((s,i)=>{let c={};c.method=e,c.url=this.baseURL+o,c.headers=this.setHeaders(n),n&&n&&(c.data=n),(0,t.A)(c).then((e=>{var o;e&&e.status===r?alert("Something went wrong!!"):(s(e),e&&(console.log("response",e),a.oR.success(null===(o=e.data)||void 0===o?void 0:o.message)))})).catch((e=>{var o,n;let t=null===e||void 0===e?void 0:e.response,r=null===e||void 0===e?void 0:e.response.data;console.log("ERROR",e),null!==(o=e.response.data)&&void 0!==o&&o.email&&e.response.data.email.length>0?a.oR.error("Email ".concat(e.response.data.email[0])):null!==(n=e.response.data)&&void 0!==n&&n.phone_number&&e.response.data.phone_number.length>0?a.oR.error("Mobile Number ".concat(e.response.data.phone_number[0])):e.response.data.message&&e.response.data.message.length>0?a.oR.error("".concat(e.response.data.message)):401===(null===t||void 0===t?void 0:t.status)?a.oR.error("".concat(r.errors)):a.oR.error("An error occurred")}))}))}setHeaders(e){let o={"accept-language":"en","Content-Type":"application/json",Accept:"application/json"};if(o.Authorization=localStorage.getItem("token"),e&&(e.isMultipart&&(o["Content-Type"]="multipart/form-data"),e.headers))for(var n in e.headers)e.headers.hasOwnProperty(n)&&(o[n]=e.headers[n]);return o}}},3304:(e,o,n)=>{n.r(o),n.d(o,{default:()=>w});var t=n(5043),r=n(2518),a=n(8446),s=n(8903),i=n(6446),c=n(5865),l=n(622),u=n(1744),d=n(3336),p=n(3216),h=n(3516),m=n(6870),v=n(6442);const g=new v.A,x=(e,o)=>(console.log("userin otpverify",e),function(n){var t;n((t=e,{type:m.AZ,payload:t})),(async e=>(console.log("user otp in api",e),new Promise((async(o,n)=>{try{const n=await g.post("".concat("accounts/verify_otp"),e);console.log("result in api",n),o(n)}catch(t){n(t)}}))))(e).then((e=>{var t,r;let a={email:null===(t=e.data)||void 0===t?void 0:t.account.email,id:null===(r=e.data)||void 0===r?void 0:r.account.id};console.log(e),n({type:m.rO}),200===e.status&&o("/register",{state:a})})).catch((e=>n((e=>({type:m.su,payload:e}))(e.message))))}),y=new v.A,f=(e,o)=>(console.log("userin otpverify",e),function(n){var t;n((t=e,{type:m.B7,payload:t})),(async e=>(console.log("mobileuser otp in api",e),new Promise((async(o,n)=>{try{const n=await y.post("".concat("accounts/verify_otp"),e);console.log("result in api",n),o(n)}catch(t){n(t)}}))))(e).then((e=>{var t,r;let a={phone_number:null===(t=e.data)||void 0===t?void 0:t.account.phone_number,id:null===(r=e.data)||void 0===r?void 0:r.account.id};console.log(e),n({type:m.El}),200===e.status&&o("/register",{state:a})})).catch((e=>n((e=>({type:m.X7,payload:e}))(e.message))))});var b=n(6929),A=n(579);const w=()=>{const e=(0,p.zy)(),o=(0,p.Zp)(),n=(0,h.wA)(),[m,v]=(0,t.useState)(""),[g,y]=(0,t.useState)(60),[w,C]=(0,t.useState)(!0),[S,j]=(0,t.useState)(["","","",""]),R=(0,t.useRef)([]),k=null===e||void 0===e?void 0:e.state;(0,t.useEffect)((()=>{let e;return g>0?e=setInterval((()=>{y((e=>e-1))}),1e3):(C(!1),clearInterval(e)),()=>clearInterval(e)}),[g]);const _="".concat(String(Math.floor(g/60)).padStart(2,"0"),":").concat(String(g%60).padStart(2,"0"));return(0,A.jsx)(l.A,{component:"main",maxWidth:"xs",sx:{margin:"auto"},children:(0,A.jsx)(i.A,{children:(0,A.jsxs)(d.A,{elevation:1,variant:"elevation",square:!1,sx:{marginTop:8,padding:"10px",display:"flex",flexDirection:"column",alignItems:"center",bgcolor:"#fff"},children:[(0,A.jsxs)(c.A,{mt:2,children:["Please Enter OTP Sent To"," ",(0,A.jsx)(a.A,{sx:{textDecoration:"none",cursor:"pointer"},children:null!==k&&void 0!==k&&k.email?null===k||void 0===k?void 0:k.email:null===k||void 0===k?void 0:k.phone_number})," "]}),(0,A.jsx)(a.A,{sx:{textDecoration:"none",fontSize:"15px",cursor:"pointer"},children:"Change ?"}),(0,A.jsxs)(i.A,{sx:{padding:"15px"},children:[(0,A.jsx)(s.Ay,{container:!0,spacing:1,sx:{display:"flex",flexDirection:"row",flexWrap:"nowrap",justifyContent:"center"},children:S.map(((e,o)=>(0,A.jsx)(s.Ay,{item:!0,children:(0,A.jsx)(u.A,{variant:"standard",autoComplete:"off",size:"small",value:e,onChange:e=>((e,o)=>{if(o.length>1)return;const n=[...S];n[e]=o,j(n),1===o.length&&e<S.length-1&&R.current[e+1].focus()})(o,e.target.value),inputProps:{maxLength:1,style:{textAlign:"center",maxWidth:"4rem"}},onKeyDown:e=>{"Backspace"===e.key&&(e=>{if(""!==S[e]){const o=[...S];o[e]="",j(o)}else e>0&&R.current[e-1].focus()})(o)},inputRef:e=>{R.current[o]=e}})},o)))}),(0,A.jsx)(r.A,{onClick:()=>(()=>{const e=S.join("");null!==k&&void 0!==k&&k.email?n(x({otp:e,email:k.email,account_id:k.id},o)):null!==k&&void 0!==k&&k.phone_number?n(f({otp:e,phone_number:k.phone_number.toString(),account_id:k.id},o)):alert("An error occurred"),j(["","","",""])})(),fullWidth:!0,variant:"contained",sx:{mt:3,mb:2,color:"#111",bgcolor:"#FFD814",borderColor:"#FCD200",borderRadius:"md",textDecoration:"none",textTransform:"none",borderRadius:"8px","&:hover":{bgcolor:"#FCD200"}},children:"Verify"}),(0,A.jsxs)(s.Ay,{container:!0,sx:{marginBottom:"8px"},children:[(0,A.jsx)(s.Ay,{item:!0,xs:!0,children:(0,A.jsxs)(c.A,{sx:{fontSize:"14px"},children:["not recieved your code ? ",_]})}),(0,A.jsx)(s.Ay,{item:!0,children:(0,A.jsx)(r.A,{color:"success",disabled:w,onClick:()=>{null!==k&&void 0!==k&&k.email?n((0,b.ie)({email:k.email,account_id:k.id},o)):null!==k&&void 0!==k&&k.phone_number?n((0,b.ie)({phone_number:k.phone_number.toString(),account_id:k.id},o)):alert("An error occurred"),y(60),C(!0)},variant:"contained",sx:{width:"15px",height:"25px",color:"#FFFCFC",bgcolor:"#2C7E34",borderColor:"#2C7E34",borderRadius:"md",textDecoration:"none",textTransform:"none",borderRadius:"8px",fontSize:"12px",marginTop:"-10px","&:hover":{bgcolor:"#2C7E34"}},children:"Resend"})})]})]})]})})})}},6929:(e,o,n)=>{n.d(o,{ie:()=>a});var t=n(6870);const r=new(n(6442).A),a=(e,o)=>function(o){var n;o((n=e,{type:t.Mj,payload:n})),(async e=>new Promise((async(o,n)=>{try{const n=await r.post("".concat("accounts/resend_otp"),e);console.log("result in api",n),o(n)}catch(t){n(t)}})))(e).then((e=>{console.log(e),o({type:t.hV})})).catch((e=>o((e=>({type:t.yZ,payload:e}))(e.message))))}},8446:(e,o,n)=>{n.d(o,{A:()=>j});var t=n(8587),r=n(8168),a=n(5043),s=n(8387),i=n(8606),c=n(6803),l=n(4535),u=n(2876),d=n(2191),p=n(5849),h=n(5865),m=n(7056),v=n(2400);function g(e){return(0,v.Ay)("MuiLink",e)}const x=(0,m.A)("MuiLink",["root","underlineNone","underlineHover","underlineAlways","button","focusVisible"]);var y=n(7162),f=n(3650);const b={primary:"primary.main",textPrimary:"text.primary",secondary:"secondary.main",textSecondary:"text.secondary",error:"error.main"},A=e=>{let{theme:o,ownerState:n}=e;const t=(e=>b[e]||e)(n.color),r=(0,y.Yn)(o,"palette.".concat(t),!1)||n.color,a=(0,y.Yn)(o,"palette.".concat(t,"Channel"));return"vars"in o&&a?"rgba(".concat(a," / 0.4)"):(0,f.X4)(r,.4)};var w=n(579);const C=["className","color","component","onBlur","onFocus","TypographyClasses","underline","variant","sx"],S=(0,l.Ay)(h.A,{name:"MuiLink",slot:"Root",overridesResolver:(e,o)=>{const{ownerState:n}=e;return[o.root,o["underline".concat((0,c.A)(n.underline))],"button"===n.component&&o.button]}})((e=>{let{theme:o,ownerState:n}=e;return(0,r.A)({},"none"===n.underline&&{textDecoration:"none"},"hover"===n.underline&&{textDecoration:"none","&:hover":{textDecoration:"underline"}},"always"===n.underline&&(0,r.A)({textDecoration:"underline"},"inherit"!==n.color&&{textDecorationColor:A({theme:o,ownerState:n})},{"&:hover":{textDecorationColor:"inherit"}}),"button"===n.component&&{position:"relative",WebkitTapHighlightColor:"transparent",backgroundColor:"transparent",outline:0,border:0,margin:0,borderRadius:0,padding:0,cursor:"pointer",userSelect:"none",verticalAlign:"middle",MozAppearance:"none",WebkitAppearance:"none","&::-moz-focus-inner":{borderStyle:"none"},["&.".concat(x.focusVisible)]:{outline:"auto"}})})),j=a.forwardRef((function(e,o){const n=(0,u.A)({props:e,name:"MuiLink"}),{className:l,color:h="primary",component:m="a",onBlur:v,onFocus:x,TypographyClasses:y,underline:f="always",variant:A="inherit",sx:j}=n,R=(0,t.A)(n,C),{isFocusVisibleRef:k,onBlur:_,onFocus:D,ref:F}=(0,d.A)(),[P,T]=a.useState(!1),M=(0,p.A)(o,F),z=(0,r.A)({},n,{color:h,component:m,focusVisible:P,underline:f,variant:A}),E=(e=>{const{classes:o,component:n,focusVisible:t,underline:r}=e,a={root:["root","underline".concat((0,c.A)(r)),"button"===n&&"button",t&&"focusVisible"]};return(0,i.A)(a,g,o)})(z);return(0,w.jsx)(S,(0,r.A)({color:h,className:(0,s.A)(E.root,l),classes:y,component:m,onBlur:e=>{_(e),!1===k.current&&T(!1),v&&v(e)},onFocus:e=>{D(e),!0===k.current&&T(!0),x&&x(e)},ref:M,ownerState:z,variant:A,sx:[...Object.keys(b).includes(h)?[]:[{color:h}],...Array.isArray(j)?j:[j]]},R))}))}}]);
//# sourceMappingURL=304.f6f23ea4.chunk.js.map